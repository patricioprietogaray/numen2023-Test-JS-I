<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        
        function saludar( saludo ){
            return function( nombre ){
                console.log(`Closure 1: ${saludo} ${nombre}`);
            }
        }
        var saludoHola = saludar('Hola'); // Esto devuelve una función
        saludoHola('Numen'); // 'Hola Numen'


        function texto1(texto1) {
            return function(texto2){
                console.log("Closure 2: En el "+texto1 + " hay "+texto2 );
            }
        }

        let textos = texto1('cielo');
        textos('estrellas');


        ////
        function hacerSaludo(idioma){
            if (idioma === 'es'){
                return function() {
                    console.log("Closure3: Hola, yo hablo en español!");
                }
            }

            if (idioma === 'en'){
                return function () {
                    console.log("Closure 3: Hello, i speak in English!");
                }
            }
        }

        let esp = hacerSaludo('es');
        let ing = hacerSaludo('en');

        //llamar a una funcion vacia que es retornada en el closure
        ing();
        esp();

        
        //// dilema del contador
        // variable global con funcion que suma a la variable global
        let contador=0;

        const suma = () => {
           return contador+= 1;
        }
        
        suma();
        console.log(contador);
        suma();
        console.log(contador);
        suma();
        console.log(contador);

        // misma funcion con más seguridad con closures
        const adicion = () => {
            //seteo en cero
            let contador = 0;
            return function ()  {
                //suma en 1 al contador y retorna
                //sigue almacenado el valor del contador en memoria
                contador+=1;
                return contador;
            }
        }

        // el contador retornado se acumula en mostrarAcumulado
        const mostrarAcumulado = adicion();
        console.log(mostrarAcumulado());
        console.log(mostrarAcumulado());
        console.log(mostrarAcumulado());

        // this
        const objeto = {
            nombre: "Contexto del Objeto",
            imprimir: function () {
                console.log(this.nombre);
            }
        }
        objeto.imprimir();

        const objeto2 = {
            nombre: "Contexto del Objeto 2",
            imprimir: objeto.imprimir()
        }
        objeto2.imprimir;

        //funcion constructora no devuelve nada o crea explicitamente un objeto
        // solo define propiedades y metodos.

        //Seudo clase
        function Jedi() {
            this.arma = "Sable de luz";
            this.poder = "La fuerza";
        }
        
        //Creacion de instancias new funcion()
        //funcion constructora
        let jedi = new Jedi();
        console.log(jedi);
        console.log("Desenfunda el "+jedi.arma+"!");


    </script>
</body>
</html>